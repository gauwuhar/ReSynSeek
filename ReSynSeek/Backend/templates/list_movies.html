<!DOCTYPE html>
<html>
<head>
  <title>Список Фильмов</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
  <link rel="icon"
        type="image/ico"
        href="static/image/favicon.ico">
  <link rel="stylesheet" href="{{url_for('static', filename='style.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
<!-- навбар -->
<nav class="navbar navbar-expand-lg fixed-top ">
  <div class="container">
    <a class="navbar-brand custom-dark" href="/">Онлайн Кинотеатр</a>
    <button class="navbar-toggler " type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon" id="nav-toggle-button"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link custom-dark" href="/">На Главную</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-dark" href="{{ url_for('list_movies') }}">Список Фильмов</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-dark" href="{{ url_for('add_movie') }}">Добавить Фильм</a>
        </li>
        <li class="nav-item">
          <a class="nav-link custom-dark" id="login-btn" href="javascript:void(0);" onclick="showLoginForm()">Админ-Панель</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="py-5"></div>


<div class="main">

  <h1>Список Фильмов:</h1>
  <div class="py-3"></div>
  <form method="POST" action="{{ url_for('list_movies') }}">
    <label for="search_query">Найти фильм по названию:</label>
    <input type="text" name="search_query" placeholder="Введите название">
    <input type="submit" value="Поиск">
  </form>

  <ul>
    {% for movie in movies %}
    <li id="movie{{ movie[0] }}">
      <strong>Название:</strong> {{ movie[1] }}<br>
      <strong>Жанр:</strong> {{ movie[2] }}<br>
      <strong>Актёрский состав:</strong> {{ movie[3] }}<br>
      <strong>Описание:</strong> {{ movie[4] }}<br>
      <strong>Год выхода:</strong> {{ movie[5] }}<br>
      <strong>Рейтинг:</strong> {{ movie[7] }}<br>
      {% if movie[6] %}
      <img src="{{ movie[6] }}" alt="image"><br>
      <button class="btn custom-blue hover-cart-btn show-section-btn" data-movie-id="{{ movie[0] }}">Показать плеер</button>
      <button class="btn custom-blue hover-cart-btn hide-section-btn" data-movie-id="{{ movie[0] }}">Скрыть плеер</button>
      <video controls width="640" height="360" id="hideworks_{{ movie[0] }}" style="display: none;">
        <source src="{{ movie[8] }}" type="video/mp4">
      </video>
      {% endif %}
      <a href="{{ url_for('update_movie', movie_id=movie[0]) }}">[Обновить]</a>
      <a href="{{ url_for('delete_movie', movie_id=movie[0]) }}">[Удалить]</a>
    </li>
    <div class="py-5"></div>
    {% endfor %}
  </ul>

  <a href="{{ url_for('index') }}">Вернуться на Главную</a>

</div>


<div class="login-form-container">

  <div id="close-login-btn" class="fas fa-times" onclick="closeLoginForm()"></div>

  <form action="/protected" method="post">
    <h3>Вход в Админ-Панель</h3>
    <span>Логин:</span>
    <input type="text" name="username" class="box" placeholder="Введите логин" id="username">
    <span>Пароль:</span>
    <input type="password" name="password" class="box" placeholder="Введите пароль" id="password">
    <input type="submit" value="Login" class="btn" onclick="checkLogin()">
  </form>

</div>


<footer class="py-3 custom-blue footer">
  <div class="container" id="footer-container">
    <p>&copy; 2023 IDev. All rights reserved.</p>
  </div>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/js/bootstrap.min.js"></script>
<script src="{{url_for('static', filename='js.js') }}"></script>

</body>
</html>
